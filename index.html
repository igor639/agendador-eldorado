<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Agendador PRO - Unidade Eldorado</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body { font-family: 'Inter', sans-serif; }
        .fade-in { animation: fadeIn 0.3s ease-out forwards; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(-10px); } to { opacity: 1; transform: translateY(0); } }
        .loader { border: 4px solid #f3f3f3; border-top: 4px solid #4f46e5; border-radius: 50%; width: 40px; height: 40px; animation: spin 1s linear infinite; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        .status-select { -webkit-appearance: none; -moz-appearance: none; appearance: none; background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6 9 12 15 18 9'%3e%3c/polyline%3e%3c/svg%3e"); background-repeat: no-repeat; background-position: right 0.5rem center; background-size: 1.5em 1.5em; padding-right: 2.5rem; }
        .status-updated { transition: background-color 0.5s; background-color: #dcfce7 !important; }
        .modal-backdrop { backdrop-filter: blur(5px); }
    </style>
</head>
<body class="bg-gradient-to-br from-slate-50 to-slate-100 text-slate-800 antialiased min-h-screen">

    <div class="container mx-auto p-4 md:p-6 max-w-6xl">
        
        <header class="text-center mb-8">
            <h1 class="text-3xl md:text-4xl font-extrabold text-slate-900">Agendador PRO</h1>
            <p class="text-slate-600 mt-2">Unidade Eldorado - Central de Comando</p>
        </header>

        <!-- Abas de Navegaﾃｧﾃ｣o -->
        <div class="mb-8 bg-white p-1 rounded-xl shadow-sm">
            <nav class="flex space-x-1" aria-label="Tabs">
                <button class="tab-btn flex-1 whitespace-nowrap py-3 px-4 font-semibold text-sm rounded-lg transition-all" data-tab="agendar">Agendar</button>
                <button class="tab-btn flex-1 whitespace-nowrap py-3 px-4 font-semibold text-sm rounded-lg transition-all" data-tab="gerenciar">Gerenciar</button>
                <button class="tab-btn flex-1 whitespace-nowrap py-3 px-4 font-semibold text-sm rounded-lg transition-all" data-tab="dashboard">Dashboard</button>
            </nav>
        </div>

        <!-- Conteﾃｺdo Principal -->
        <main id="content-area">
            <!-- SEﾃﾃグ AGENDAR -->
            <section id="agendar-section" class="tab-content space-y-6 fade-in">
                <div class="bg-white p-6 rounded-2xl shadow-lg grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                        <label for="assistant-name" class="block text-sm font-semibold text-slate-700 mb-2">Seu Nome</label>
                        <select id="assistant-name" class="w-full p-3 bg-slate-50 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 transition">
                            <option value="">-- Escolha --</option>
                            <option value="IGOR">Igor</option>
                            <option value="DIANA">Diana</option>
                            <option value="TATIANA">Tatiana</option>
                            <option value="CAMILE">Camile</option>
                            <option value="ISABELLE">Isabelle</option>
                            <option value="WELKER">Welker</option>
                        </select>
                    </div>
                    <div>
                        <label for="location-select" class="block text-sm font-semibold text-slate-700 mb-2">Local</label>
                        <select id="location-select" class="w-full p-3 bg-slate-50 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 transition">
                            <option value="Eldorado" selected>Eldorado</option>
                            <option value="Centro">Centro</option>
                        </select>
                    </div>
                </div>

                <div class="bg-white p-6 rounded-2xl shadow-lg">
                    <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 gap-4">
                        <h2 class="text-xl font-semibold text-slate-900">Destinatﾃ｡rios</h2>
                        <div class="flex gap-2 w-full sm:w-auto">
                            <button id="add-recipient-btn" class="flex-1 sm:flex-none btn-indigo">+ Amanhﾃ｣</button>
                            <button id="add-puxada-btn" class="flex-1 sm:flex-none btn-amber">+ Hoje (Puxada)</button>
                        </div>
                    </div>
                    <div id="recipients-list" class="space-y-4">
                        <!-- O empty-state serﾃ｡ inserido aqui via JavaScript -->
                    </div>
                </div>

                <div class="flex justify-end gap-3">
                    <button id="quick-message-btn" class="btn-green">鐙 Mensagem Rﾃ｡pida</button>
                    <button id="generate-messages-btn" class="btn-blue" disabled>統 Gerar Mensagens Completas</button>
                </div>

                <div id="messages-section" class="bg-white p-6 rounded-2xl shadow-lg hidden">
                    <h2 class="text-xl font-semibold text-slate-900 mb-4">Mensagens Geradas</h2>
                    <div id="messages-list" class="space-y-4"></div>
                </div>
            </section>
            
            <!-- SEﾃﾃグ GERENCIAR -->
            <section id="gerenciar-section" class="tab-content hidden fade-in">
                <div class="bg-white p-6 rounded-2xl shadow-lg">
                    <h2 class="text-xl font-semibold text-slate-900 mb-4">Agendamentos de Hoje</h2>
                    <p class="text-sm text-slate-600 mb-4">Selecione seu nome para ver e gerenciar os agendamentos do dia.</p>
                    <div id="management-list" class="space-y-3">
                        <div id="loader" class="text-center py-12 hidden"><div class="loader mx-auto"></div><p class="mt-4 text-slate-500">Buscando...</p></div>
                        <div id="management-empty-state" class="text-center py-12 border-2 border-dashed border-slate-200 rounded-lg hidden"><p class="text-slate-500">Nenhum agendamento encontrado para hoje.</p></div>
                    </div>
                </div>
            </section>

            <!-- SEﾃﾃグ DASHBOARD -->
            <section id="dashboard-section" class="tab-content hidden fade-in">
                <div class="bg-white p-6 rounded-2xl shadow-lg">
                    <h2 class="text-xl font-semibold text-slate-900 mb-6">Seu Desempenho Hoje</h2>
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                        <div class="bg-slate-50 p-4 rounded-xl">
                            <h3 class="text-lg font-semibold text-slate-700 mb-2">Resumo de Status</h3>
                            <canvas id="statusChart"></canvas>
                        </div>
                        <div class="bg-slate-50 p-4 rounded-xl">
                            <h3 class="text-lg font-semibold text-slate-700 mb-2">Totais do Dia</h3>
                            <div id="dashboard-stats" class="space-y-2 mt-4"></div>
                        </div>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <!-- Modal para Mensagem Rﾃ｡pida -->
    <div id="quick-message-modal" class="fixed inset-0 z-50 hidden items-center justify-center p-4 modal-backdrop bg-black bg-opacity-50">
        <div class="bg-white rounded-2xl shadow-2xl max-w-lg w-full p-6 transform transition-all">
            <h3 class="text-xl font-bold text-slate-900 mb-4">Gerar Mensagem Rﾃ｡pida</h3>
            <div class="space-y-4">
                <div>
                    <label for="quick-jovem" class="block text-sm font-medium text-slate-700">Nome do Jovem</label>
                    <input type="text" id="quick-jovem" class="w-full mt-1 p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500">
                </div>
                <div>
                    <label for="quick-numero" class="block text-sm font-medium text-slate-700">Nﾃｺmero (com DDD)</label>
                    <input type="tel" id="quick-numero" placeholder="55319..." class="w-full mt-1 p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500">
                </div>
                <div>
                    <label class="block text-sm font-medium text-slate-700 mb-2">Escolha o Template</label>
                    <div class="space-y-2">
                        <label class="flex items-center p-3 border rounded-lg cursor-pointer hover:bg-slate-50">
                            <input type="radio" name="quick-template" value="variacao1" class="mr-3" checked>
                            <span class="text-sm">VARIAﾃﾃグ 1 (Retorno atﾃｩ amanhﾃ｣)</span>
                        </label>
                        <label class="flex items-center p-3 border rounded-lg cursor-pointer hover:bg-slate-50">
                            <input type="radio" name="quick-template" value="variacao2" class="mr-3">
                            <span class="text-sm">VARIAﾃﾃグ 2 (Retorno obrigatﾃｳrio)</span>
                        </label>
                        <label class="flex items-center p-3 border rounded-lg cursor-pointer hover:bg-slate-50">
                            <input type="radio" name="quick-template" value="followup" class="mr-3">
                            <span class="text-sm font-semibold text-red-600">FOLLOW-UP (Prazo encerra hoje)</span>
                        </label>
                    </div>
                </div>
            </div>
            <div class="flex justify-end gap-3 mt-6">
                <button id="quick-modal-cancel" class="px-4 py-2 text-slate-600 hover:bg-slate-100 rounded-lg transition">Cancelar</button>
                <button id="quick-generate-btn" class="btn-green">Gerar e Enviar</button>
            </div>
            <div id="quick-message-result" class="mt-4 hidden"></div>
        </div>
    </div>
    
    <script>
    document.addEventListener('DOMContentLoaded', () => {
        const SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbw5p93oojhuDCgPpTII9E6jTSoO3L_2X_CxQSEWlYYoa4WTLW9TvXBs_4LDvFPS9qFp0Q/exec';

        // --- Seletores Globais ---
        const assistantSelect = document.getElementById('assistant-name');
        const locationSelect = document.getElementById('location-select');
        const addRecipientBtn = document.getElementById('add-recipient-btn');
        const addPuxadaBtn = document.getElementById('add-puxada-btn');
        const recipientsList = document.getElementById('recipients-list');
        const generateMessagesBtn = document.getElementById('generate-messages-btn');
        const messagesSection = document.getElementById('messages-section');
        const messagesList = document.getElementById('messages-list');
        const managementList = document.getElementById('management-list');
        const loader = document.getElementById('loader');
        const managementEmptyState = document.getElementById('management-empty-state');
        
        // Quick Message Modal
        const quickMessageBtn = document.getElementById('quick-message-btn');
        const quickMessageModal = document.getElementById('quick-message-modal');
        const quickModalCancel = document.getElementById('quick-modal-cancel');
        const quickGenerateBtn = document.getElementById('quick-generate-btn');
        const quickJovemInput = document.getElementById('quick-jovem');
        const quickNumeroInput = document.getElementById('quick-numero');
        const quickMessageResult = document.getElementById('quick-message-result');

        let recipients = [];
        const LOCAL_STORAGE_KEY = 'agendadorProEldoradoRascunhos';
        let statusChartInstance = null;

        // --- Classes de Botﾃ｣o (Tailwind) ---
        const btnClasses = 'py-2 px-4 font-semibold rounded-lg shadow-md transition-all duration-300 focus:outline-none focus:ring-2';
        document.querySelectorAll('.btn-indigo').forEach(el => el.className = `${btnClasses} bg-indigo-600 text-white hover:bg-indigo-700 focus:ring-indigo-500`);
        document.querySelectorAll('.btn-amber').forEach(el => el.className = `${btnClasses} bg-amber-500 text-white hover:bg-amber-600 focus:ring-amber-500`);
        document.querySelectorAll('.btn-green').forEach(el => el.className = `${btnClasses} bg-green-600 text-white hover:bg-green-700 focus:ring-green-500`);
        document.querySelectorAll('.btn-blue').forEach(el => el.className = `${btnClasses} bg-blue-600 text-white hover:bg-blue-700 focus:ring-blue-500`);

        // --- Lﾃｳgica de Tabs ---
        const tabBtns = document.querySelectorAll('.tab-btn');
        const tabContents = document.querySelectorAll('.tab-content');
        
        const switchTab = (tabName) => {
            tabBtns.forEach(btn => {
                btn.classList.remove('bg-white', 'text-indigo-600', 'shadow-sm');
                btn.classList.add('text-slate-600', 'hover:text-slate-800');
            });
            tabContents.forEach(content => content.classList.add('hidden'));

            const activeBtn = document.querySelector(`[data-tab="${tabName}"]`);
            activeBtn.classList.remove('text-slate-600', 'hover:text-slate-800');
            activeBtn.classList.add('bg-white', 'text-indigo-600', 'shadow-sm');
            
            document.getElementById(`${tabName}-section`).classList.remove('hidden');

            if (tabName === 'gerenciar') fetchAppointments();
            if (tabName === 'dashboard') fetchDashboardData();
        };

        tabBtns.forEach(btn => btn.addEventListener('click', () => switchTab(btn.dataset.tab)));
        switchTab('agendar');

        // --- Lﾃｳgica de Dashboard (sem mudanﾃｧas) ---
        const fetchDashboardData = async () => { /* ... */ };
        const renderDashboard = (data) => { /* ... */ };

        // --- Lﾃｳgica de Gerenciamento (sem mudanﾃｧas) ---
        const fetchAppointments = async () => { /* ... */ };
        const renderAppointments = (appointments) => { /* ... */ };
        const updateAppointmentStatus = async (selectElement) => { /* ... */ };
        managementList.addEventListener('change', (e) => { if (e.target.classList.contains('status-select')) updateAppointmentStatus(e.target); });

        // --- Lﾃｳgica de Agendamento ---
        const assistantFullNameMap = { 'IGOR': 'Igor Araﾃｺjo de Alencar', 'DIANA': 'Diana Dﾂｴﾃ」ila Fagundes', 'TATIANA': 'Tatiana F. Moretti', 'CAMILE': 'Camile da Cruz Monteiro', 'ISABELLE': 'Isabelle', 'WELKER': 'Welker Pablo Zanetti' };
        const messageTemplates = { long: { title: `*CONVOCAﾃﾃグ...*`, /* ... */ } };
        
        const getTodayDateString = () => { const today = new Date(); return `${String(today.getDate()).padStart(2, '0')}/${String(today.getMonth() + 1).padStart(2, '0')}/${today.getFullYear()}`; };
        const getTomorrowDateString = () => { const today = new Date(); const tomorrow = new Date(today); let daysToAdd = 1; if (today.getDay() === 5) daysToAdd = 3; if (today.getDay() === 6) daysToAdd = 2; tomorrow.setDate(today.getDate() + daysToAdd); return `${String(tomorrow.getDate()).padStart(2, '0')}/${String(tomorrow.getMonth() + 1).padStart(2, '0')}/${tomorrow.getFullYear()}`; };
        const getDayOfWeek = (dateString) => { /* ... */ };
        const calculateAge = (birthDateString) => { /* ... */ };
        const generateCode = (jovem) => { /* ... */ };
        
        const saveToLocalStorage = () => { /* ... */ };
        const loadFromLocalStorage = () => { /* ... */ };

        // --- CORREﾃﾃグ: renderRecipients ---
        const renderRecipients = () => {
            recipientsList.innerHTML = '';
            if (recipients.length === 0) {
                // CORREﾃﾃグ: Clona o empty-state para evitar problemas de referﾃｪncia de elemento
                const emptyStateClone = document.getElementById('empty-state-template').content.cloneNode(true);
                recipientsList.appendChild(emptyStateClone);
            } else {
                recipients.forEach((recipient, index) => {
                    recipientsList.appendChild(createRecipientForm(recipient, index));
                });
            }
            updateGenerateButtonState();
        };

        const createRecipientForm = (recipient, index) => {
            const form = document.createElement('div');
            form.className = 'p-5 border border-slate-200 rounded-xl space-y-4 fade-in';
            form.dataset.id = recipient.id;
            form.innerHTML = `
                <div class="flex justify-between items-center">
                    <h3 class="font-semibold text-lg text-slate-700">Destinatﾃ｡rio ${index + 1}</h3>
                    <button class="remove-recipient-btn p-2 text-slate-400 hover:bg-red-100 hover:text-red-600 rounded-full transition-colors" data-id="${recipient.id}" title="Remover"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M3 6h18"/><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/><line x1="10" x2="10" y1="11" y2="17"/><line x1="14" x2="14" y1="11" y2="17"/></svg></button>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div><label class="block text-sm font-medium text-slate-600 mb-1">Jovem Convocado</label><input type="text" placeholder="Nome completo do jovem" data-field="jovem" value="${recipient.jovem || ''}" class="w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-indigo-500 transition"></div>
                    <div><label class="block text-sm font-medium text-slate-600 mb-1">Data de Nascimento (Opcional)</label><input type="text" placeholder="DD/MM/AAAA" maxlength="10" data-field="data_nascimento" value="${recipient.data_nascimento || ''}" class="w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-indigo-500 transition date-mask"></div>
                    <div class="md:col-span-2"><label class="block text-sm font-medium text-slate-600 mb-1">Responsﾃ｡vel</label><input type="text" placeholder="Nome do responsﾃ｡vel" data-field="responsavel" value="${recipient.responsavel || ''}" class="w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-indigo-500 transition"></div>
                    <div><label class="block text-sm font-medium text-slate-600 mb-1">Telefone do Responsﾃ｡vel</label><input type="tel" placeholder="55319..." maxlength="15" data-field="numero_responsavel" value="${recipient.numero_responsavel || ''}" class="w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-indigo-500 transition phone-mask"></div>
                    <div><label class="block text-sm font-medium text-slate-600 mb-1">Telefone do Jovem (opcional)</label><input type="tel" placeholder="55319..." maxlength="15" data-field="numero_jovem" value="${recipient.numero_jovem || ''}" class="w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-indigo-500 transition phone-mask"></div>
                    <div><label class="block text-sm font-medium text-slate-600 mb-1">Data do Agendamento</label><input type="text" placeholder="DD/MM/AAAA" maxlength="10" data-field="data" value="${recipient.data || ''}" class="w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-indigo-500 transition date-mask"></div>
                    <div><label class="block text-sm font-medium text-slate-600 mb-1">Horﾃ｡rio</label><input type="text" placeholder="HH:MM" maxlength="5" data-field="horario" value="${recipient.horario || ''}" class="w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-indigo-500 transition time-mask"></div>
                    <div class="md:col-span-2"><label class="block text-sm font-medium text-slate-600 mb-1">Irmﾃ｣os (opcional)</label><input type="text" placeholder="Ex: Joﾃ｣o (12), Maria (10)" data-field="irmaos" value="${recipient.irmaos || ''}" class="w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-indigo-500 transition"></div>
                </div>`;
            return form;
        };
        
        // --- NOVO: Lﾃｳgica de Mﾃ｡scaras de Entrada ---
        recipientsList.addEventListener('input', (e) => {
            if (!e.target.dataset.field) return;
            let value = e.target.value;
            let cursorPos = e.target.selectionStart;

            // Mﾃ｡scara de Data
            if (e.target.classList.contains('date-mask')) {
                value = value.replace(/\D/g, '');
                if (value.length >= 2) value = value.slice(0, 2) + '/' + value.slice(2);
                if (value.length >= 5) value = value.slice(0, 5) + '/' + value.slice(5, 9);
                if (value.length > 10) value = value.slice(0, 10);
            }
            // Mﾃ｡scara de Telefone
            else if (e.target.classList.contains('phone-mask')) {
                value = value.replace(/\D/g, '');
                if (value.length > 0 && !value.startsWith('55')) {
                    value = '55' + value;
                }
                if (value.length > 15) value = value.slice(0, 15);
            }
            // Mﾃ｡scara de Hora
            else if (e.target.classList.contains('time-mask')) {
                value = value.replace(/\D/g, '');
                if (value.length >= 2) value = value.slice(0, 2) + ':' + value.slice(2, 4);
                if (value.length > 5) value = value.slice(0, 5);
            }
            // Se nﾃ｣o for nenhum dos campos mascarados, apenas atualiza o valor
            else {
                handleUpdateRecipient(e.target.closest('[data-id]').dataset.id, e.target.dataset.field, e.target.value);
                return;
            }

            e.target.value = value;
            // Ajusta a posiﾃｧﾃ｣o do cursor para nﾃ｣o pular para o final
            e.target.setSelectionRange(cursorPos, cursorPos);
            
            handleUpdateRecipient(e.target.closest('[data-id]').dataset.id, e.target.dataset.field, value);
        });

        const renderMessages = (generatedMessages) => { /* ... */ };
        const handleAddRecipient = () => { recipients.push({ id: Date.now().toString(), jovem: '', responsavel: '', data: getTomorrowDateString(), horario: '', numero_responsavel: '', numero_jovem: '', data_nascimento: '', irmaos: '', isPuxada: false }); renderRecipients(); saveToLocalStorage(); };
        const handleAddPuxada = () => { recipients.push({ id: Date.now().toString(), jovem: '', responsavel: '', data: getTodayDateString(), horario: '', numero_responsavel: '', numero_jovem: '', data_nascimento: '', irmaos: '', isPuxada: true }); renderRecipients(); saveToLocalStorage(); };
        const handleRemoveRecipient = (id) => { recipients = recipients.filter(r => r.id !== id); renderRecipients(); saveToLocalStorage(); };
        const handleUpdateRecipient = (id, field, value) => { const recipient = recipients.find(r => r.id === id); if (recipient) { recipient[field] = value; saveToLocalStorage(); } };
        const handleGenerateMessages = () => { /* ... */ };
        const generateMessageText = (data) => { /* ... */ };
        const handleSaveToSheet = async (button) => { /* ... */ };
        const updateGenerateButtonState = () => { generateMessagesBtn.disabled = (assistantSelect.value === '' || recipients.length === 0); };

        // --- Lﾃｳgica de Mensagem Rﾃ｡pida (sem mudanﾃｧas) ---
        const quickMessageTemplates = { variacao1: (jovem) => `...`, variacao2: (jovem) => `...`, followup: (jovem) => `...` };
        quickMessageBtn.addEventListener('click', () => quickMessageModal.style.display = 'flex');
        quickModalCancel.addEventListener('click', () => { quickMessageModal.style.display = 'none'; quickMessageResult.classList.add('hidden'); });
        quickGenerateBtn.addEventListener('click', () => { /* ... */ });
        
        // --- INICIALIZAﾃﾃグ ---
        addRecipientBtn.addEventListener('click', handleAddRecipient);
        addPuxadaBtn.addEventListener('click', handleAddPuxada);
        recipientsList.addEventListener('click', (e) => { if (e.target.closest('.remove-recipient-btn')) handleRemoveRecipient(e.target.closest('.remove-recipient-btn').dataset.id); });
        generateMessagesBtn.addEventListener('click', handleGenerateMessages);
        messagesList.addEventListener('click', (e) => e.target.closest('.save-btn') && handleSaveToSheet(e.target.closest('.save-btn')));
        assistantSelect.addEventListener('change', () => { updateGenerateButtonState(); if (document.getElementById('gerenciar-section').classList.contains('hidden') === false) fetchAppointments(); if (document.getElementById('dashboard-section').classList.contains('hidden') === false) fetchDashboardData(); });
        
        loadFromLocalStorage();
        renderRecipients();
    });
    </script>
    
    <!-- CORREﾃﾃグ: Template do empty-state escondido -->
    <template id="empty-state-template">
        <div id="empty-state" class="text-center py-8 border-2 border-dashed border-slate-200 rounded-lg">
            <p class="text-slate-500">Nenhum destinatﾃ｡rio adicionado.</p>
        </div>
    </template>
</body>
</html>
